# 🌊 积水车辆检测桌面系统

基于深度学习的积水车辆检测桌面应用程序，采用PyQt6构建专业的图形用户界面，提供高效的图像分析和批量处理功能。

## ✨ 核心功能

### 🔥 AI分析引擎
- 🚗 **车辆检测**: 支持YOLOv11、RT-DETR多种先进检测模型
- 🌊 **水面分割**: 集成DeepLabV3、YOLOv11分割算法  
- 📊 **淹没分析**: 智能计算车辆淹没等级（轻度/中度/重度）
- 🔄 **灵活模式**: 车辆检测/水面分割/组合分析三种工作模式

### 💻 桌面界面特色
- 🖥️ **现代化UI**: 深色主题的专业界面设计
- 🖱️ **拖拽上传**: 支持图片文件拖拽导入
- 📦 **批量处理**: 多文件同时分析，提高工作效率
- 🔍 **实时预览**: 原图与分析结果左右对比显示
- 📊 **统计面板**: 实时显示检测对象数量和水位等级

### ⚡ 高级功能
- 🧠 **智能缓存**: 自动缓存分析结果，避免重复计算
- 📈 **性能监控**: 实时监控系统资源使用情况
- 💾 **结果导出**: 支持分析结果批量下载
- 🎯 **模型切换**: 动态选择不同AI模型进行分析

## 📁 项目结构

```
flood_detection_app/
├── main.py                          # 桌面应用程序主入口
├── start_app.sh                     # 桌面应用启动脚本
├── requirements.txt                 # Python依赖包列表
├── models/                          # AI模型文件目录
│   ├── yolov11_car_detection.pt     # YOLOv11车辆检测模型
│   ├── rtdetr_car_detection.pt      # RT-DETR车辆检测模型
│   ├── deeplabv3_water.pt          # DeepLabV3水面分割模型
│   └── yolov11_seg_water.pt        # YOLOv11水面分割模型
├── config/                          # 配置文件目录
│   ├── development.yml              # 开发环境配置
│   └── production.yml               # 生产环境配置
├── flood_detection_app/
│   ├── __init__.py                  # 应用包初始化
│   ├── core/                        # 核心AI引擎
│   │   ├── __init__.py
│   │   ├── config.py                # 配置管理器
│   │   ├── data_models.py           # 数据模型定义
│   │   ├── exceptions.py            # 异常处理类
│   │   ├── flood_analyzer.py        # 积水分析器
│   │   ├── image_processor.py       # 图像处理器
│   │   ├── model_manager.py         # AI模型管理器
│   │   └── visualization_engine.py  # 可视化引擎
│   └── desktop/                     # 桌面GUI应用
│       ├── __init__.py
│       ├── main_window.py           # 主窗口界面
│       ├── analysis_controller.py   # 分析控制器
│       ├── file_operations.py       # 文件操作模块
│       ├── image_display_widget.py  # 图像显示组件
│       └── statistics_widget.py     # 统计数据组件
├── test_images/                     # 测试图片目录
└── results/                         # 分析结果输出目录
```

## 🚀 快速开始

### 环境要求
- Python 3.8+
- PyQt6
- PyTorch 2.0+
- CUDA支持（可选，用于GPU加速）

### 安装步骤

```bash
# 1. 克隆项目
git clone <repository-url>
cd flood-detection-desktop

# 2. 安装Python依赖
pip install -r requirements.txt

# 3. 下载AI模型文件
# 将以下模型文件放置到 models/ 目录：
# - yolov11_car_detection.pt
# - rtdetr_car_detection.pt  
# - deeplabv3_water.pt
# - yolov11_seg_water.pt

# 4. 启动桌面应用
python main.py desktop

# 或使用启动脚本（推荐）
chmod +x start_app.sh
./start_app.sh
```

### 使用方法

1. **上传图片**: 拖拽图片到上传区域或点击"Upload Image"按钮
2. **批量上传**: 点击"Batch Upload"选择多张图片
3. **选择模式**: 在左侧面板选择分析模式和AI模型
4. **开始分析**: 点击"Analyze"进行单张分析或"Batch Analyze"批量分析
5. **查看结果**: 右侧面板显示原图和分析结果对比
6. **导出结果**: 点击"Download Results"保存分析结果

## 📖 使用指南

### 界面介绍

#### 左侧控制面板
- **上传区域**: 支持拖拽和点击上传图片文件
- **文件列表**: 显示已上传的图片，支持选择和批量操作
- **模型选择**: 选择分析模式和AI模型
- **操作按钮**: 分析、批量分析、清除、导出等功能

#### 右侧显示面板  
- **原图显示**: 左侧显示原始图片
- **结果显示**: 右侧显示AI分析结果
- **统计摘要**: 底部显示检测对象数量和水位等级

### 功能特色

#### 🎯 智能分析模式
- **组合分析**: 同时进行车辆检测和水面分割
- **车辆检测**: 仅检测图片中的车辆对象
- **水面分割**: 仅进行水面区域分割

#### 📊 分析结果
- **车辆标注**: 用边界框标出检测到的车辆
- **水面标注**: 用颜色遮罩显示水面区域
- **淹没等级**: 根据车辆与水面重叠程度判断淹没等级
- **统计数据**: 显示检测对象数量和整体水位情况

#### 💾 结果管理
- **智能缓存**: 自动保存分析结果，避免重复计算
- **批量导出**: 支持将所有分析结果打包下载
- **格式支持**: 结果以JSON格式保存，包含详细的检测信息

## 🛠️ 配置说明

### 模型配置
在 `config/development.yml` 中可以配置：
- 模型文件路径
- 检测阈值参数
- 图像处理参数
- 缓存设置

### 性能优化
- **GPU加速**: 自动检测并使用CUDA（如果可用）
- **内存管理**: 智能释放不需要的图像数据
- **并行处理**: 批量分析时使用多线程处理

## 📁 模型文件

请将以下预训练模型文件放置在 `models/` 目录中：
- `yolov11_car_detection.pt` - YOLOv11车辆检测模型
- `rtdetr_car_detection.pt` - RT-DETR车辆检测模型  
- `deeplabv3_water.pt` - DeepLabV3水面分割模型
- `yolov11_seg_water.pt` - YOLOv11水面分割模型

## ✅ 功能特性

### 已实现功能
- ✅ **AI分析引擎**: 完整的深度学习分析引擎
- ✅ **桌面GUI**: 基于PyQt6的现代化界面
- ✅ **多模型支持**: YOLOv11、RT-DETR、DeepLabV3等
- ✅ **批量处理**: 多文件并行分析处理
- ✅ **智能缓存**: 分析结果自动缓存机制
- ✅ **拖拽上传**: 直观的文件拖拽导入
- ✅ **实时预览**: 原图与结果对比显示
- ✅ **结果导出**: 分析结果批量下载
- ✅ **性能监控**: 系统资源使用监控
- ✅ **跨平台**: 支持Windows/macOS/Linux

### 系统优势
- 🚀 **高性能**: GPU加速，快速分析处理
- 🎯 **高精度**: 多种先进AI模型可选
- 💡 **易使用**: 直观的图形界面操作
- 🔧 **可配置**: 灵活的参数和模型配置
- 📊 **专业化**: 专门针对积水车辆检测优化

## 🔧 技术架构

### 🧠 AI分析引擎
- **深度学习框架**: PyTorch 2.0+
- **检测模型**: YOLOv11, RT-DETR
- **分割模型**: DeepLabV3, YOLOv11 Segmentation
- **图像处理**: OpenCV, PIL, NumPy, scikit-image
- **模型管理**: Ultralytics, 自定义模型加载器

### 💻 桌面应用框架
- **GUI框架**: PyQt6 - 现代化跨平台界面
- **异步处理**: QThread多线程, 信号槽机制
- **图像显示**: 自定义高性能图像显示组件
- **文件处理**: 拖拽上传, 批量文件管理
- **界面设计**: 深色主题, 响应式布局

### 🎯 核心模块
- **配置管理**: YAML配置文件, 动态参数调整
- **数据模型**: Pydantic数据验证和序列化
- **异常处理**: 完善的错误处理和用户提示
- **缓存系统**: 智能结果缓存, 避免重复计算
- **可视化引擎**: 检测结果可视化渲染

### ⚡ 性能优化
- **GPU加速**: CUDA自动检测和使用
- **内存管理**: 智能内存释放和垃圾回收
- **并行处理**: 多线程批量分析
- **缓存机制**: 分析结果持久化缓存

## 🎯 应用场景

### 🏢 商业应用
- **保险理赔**: 车辆积水损失评估和理赔处理
- **物流运输**: 运输路线积水风险评估
- **停车场管理**: 地下停车场积水监控

### 🏛️ 政府机构
- **应急管理**: 洪水灾害车辆损失快速统计
- **城市规划**: 积水易发区域识别和规划
- **交通管理**: 道路积水对交通影响评估

### 🎓 科研教育
- **学术研究**: 计算机视觉和深度学习算法研究
- **教学演示**: AI图像分析技术教学案例
- **毕业设计**: 相关专业学生项目开发

### 👨‍💻 个人开发
- **技术学习**: 深度学习和PyQt开发实践
- **项目扩展**: 基于现有框架开发其他检测应用
- **算法验证**: 新算法模型的测试和验证平台

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进项目！

1. Fork 项目
2. 创建功能分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 打开 Pull Request

## 📄 许可证

本项目采用 MIT 许可证 - 查看 [LICENSE](LICENSE) 文件了解详情

## 📞 联系方式

如有问题或建议，请通过以下方式联系：
- 提交 [Issue](../../issues)
- 发送邮件到项目维护者

---

⭐ 如果这个项目对你有帮助，请给它一个星标！